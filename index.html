<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>English Kids</title>

<style>
:root{
  --blue:#4a6cf7; --purple:#7b5cff; --pink:#ff4fa3; --mint:#22c55e; --yellow:#ffd54a;
  --ink:#1f2937; --card:rgba(255,255,255,.92);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui, -apple-system, "Arial Rounded MT Bold", Arial, sans-serif;
  color:var(--ink);
  text-align:center;
  background:
    radial-gradient(900px 420px at 12% 10%, #fff7d6 0%, transparent 55%),
    radial-gradient(900px 420px at 88% 25%, #dff7ff 0%, transparent 55%),
    radial-gradient(900px 420px at 60% 92%, #f7dcff 0%, transparent 55%),
    linear-gradient(135deg, #ffe7d2, #f7b9ff 45%, #bfe8ff);
  min-height:100vh;
}
header{
  position:sticky; top:0; z-index:10;
  color:#fff;
  padding:14px 12px;
  font-size:22px;
  font-weight:1000;
  background: linear-gradient(90deg,var(--blue),var(--purple));
  box-shadow:0 10px 24px rgba(0,0,0,.18);
}
.header-row{
  max-width:560px;margin:0 auto;
  display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
}
.pill{
  display:inline-flex;align-items:center;gap:8px;
  background:rgba(255,255,255,.18);
  border:2px solid rgba(255,255,255,.22);
  padding:6px 10px;border-radius:999px;
  font-size:14px;font-weight:1000;
  backdrop-filter: blur(6px);
}
.pill button{
  border:none;border-radius:999px;
  padding:8px 10px;font-size:13px;font-weight:1000;
  background: linear-gradient(135deg,#ffd54a,#ffe98a);
  color:#5a3b00;
  box-shadow:none;
}
.pill button:active{ transform:scale(.98); }

section{max-width:560px;margin:0 auto;padding:18px;}
.card{
  background:var(--card);border-radius:18px;padding:18px;margin-bottom:18px;
  box-shadow:0 14px 30px rgba(0,0,0,.14);
  border:2px solid rgba(255,255,255,.6);
  animation: cardIn .28s ease-out;
}
@keyframes cardIn{ from{transform:translateY(6px);opacity:.92} to{transform:translateY(0);opacity:1} }
h2{margin:0 0 10px;font-size:20px;font-weight:1000;}

img{
  width:230px;height:230px;border-radius:18px;background:#fff;
  border:3px solid rgba(74,108,247,.18);
  box-shadow:0 16px 28px rgba(0,0,0,.16);
}
.wiggle{ animation: wiggle .45s ease-out; }
@keyframes wiggle{
  0%{ transform: rotate(0deg) scale(1); }
  25%{ transform: rotate(-3deg) scale(1.02); }
  55%{ transform: rotate(3deg) scale(1.02); }
  100%{ transform: rotate(0deg) scale(1); }
}
.word{ font-size:34px;font-weight:1000;letter-spacing:2px;margin-top:10px; }
.wordGlow{ animation: glow .6s ease-out; }
@keyframes glow{
  0%{ text-shadow:0 0 0 rgba(74,108,247,0); transform: scale(1); }
  55%{ text-shadow:0 0 18px rgba(74,108,247,.35); transform: scale(1.05); }
  100%{ text-shadow:0 2px 0 rgba(255,255,255,.8); transform: scale(1); }
}
.row{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin-top:12px;}
button.big{
  border:none;border-radius:16px;padding:14px 18px;font-size:18px;font-weight:1000;
  cursor:pointer;-webkit-tap-highlight-color:transparent;
  box-shadow:0 10px 18px rgba(0,0,0,.14);
}
button.big:active{ transform: scale(.98); }
.btn-blue{ background: linear-gradient(135deg,var(--blue),var(--purple)); color:#fff; }
.btn-pink{ background: linear-gradient(135deg,var(--pink),#ff86c9); color:#fff; }
.btn-yellow{ background: linear-gradient(135deg,var(--yellow),#ffe98a); color:#5a3b00; }
.btn-mint{ background: linear-gradient(135deg,var(--mint),#86efac); color:#064; }

canvas{
  width:330px;height:220px;border-radius:16px;
  border:3px solid rgba(74,108,247,.25);background:#fff;touch-action:none;
  box-shadow: inset 0 0 0 2px rgba(74,108,247,.08);
}

/* Toast */
#toast{
  position:fixed;left:50%;bottom:18px;
  transform: translateX(-50%) translateY(10px);
  background:rgba(17,24,39,.92);color:#fff;
  padding:10px 14px;border-radius:999px;
  font-weight:1000;font-size:14px;
  opacity:0;pointer-events:none;
  transition: opacity .18s ease, transform .18s ease;
  z-index:999;
}
#toast.show{ opacity:1; transform: translateX(-50%) translateY(0); }

/* Star pop */
#fx{ position:fixed; inset:0; pointer-events:none; z-index:998; }
.fx-star{
  position:absolute;font-size:32px;
  animation: floatUp .9s ease-out forwards;
  filter: drop-shadow(0 10px 10px rgba(0,0,0,.18));
}
@keyframes floatUp{
  0%{ transform: translate(-50%,-50%) scale(.7) rotate(-8deg); opacity:0; }
  20%{ opacity:1; }
  60%{ transform: translate(-50%,-90px) scale(1.1) rotate(6deg); }
  100%{ transform: translate(-50%,-140px) scale(.9) rotate(0deg); opacity:0; }
}

/* Lock overlay */
#lock{
  display:none;
  position:fixed; inset:0;
  background: rgba(0,0,0,.45);
  z-index:1000;
  padding:18px;
}
#lock .panel{
  max-width:520px;margin:20vh auto 0;
  background:rgba(255,255,255,.96);
  border-radius:18px;
  padding:18px;
  box-shadow:0 20px 50px rgba(0,0,0,.25);
}
#lock h3{ margin:0 0 8px; font-size:20px; }
#lock p{ margin:0 0 14px; font-weight:900; color:#334155; }
</style>
</head>

<body>
<header>
  <div class="header-row">
    <div>üåà English Kids</div>
    <div class="pill" id="levelPill">üß© Level <span id="levelNum">1</span> ‚Ä¢ <span id="lvlInfo">1/4</span></div>
    <div class="pill" id="starPill">‚≠ê <span id="stars">0</span> <button id="resetStars" type="button">Reset</button></div>
  </div>
</header>

<div id="fx"></div>
<div id="toast">Nice!</div>

<div id="lock">
  <div class="panel">
    <h3>üîí Level Locked</h3>
    <p>Earn <span id="needStars">0</span> total ‚≠ê to unlock!</p>
    <button class="big btn-blue" id="closeLock" type="button">OK</button>
  </div>
</div>

<section>
  <div class="card">
    <h2>üëÄ Look</h2>
    <img id="pic" src="https://placehold.co/230x230?text=DOG" alt="DOG" />
  </div>

  <div class="card">
    <h2>ü§î Guess</h2>
    <div id="word" class="word">DOG</div>

    <div class="row">
      <button class="big btn-yellow" id="randomBtn" type="button">Random üé≤</button>
    </div>

    <!-- BIG, always-visible Next Level button -->
    <div class="row" style="margin-top:14px">
      <button class="big btn-mint" id="nextLevelBtn" type="button">Next Level ‚û°Ô∏è</button>
    </div>
  </div>

  <div class="card">
    <h2>üó£Ô∏è Say</h2>
    <div class="row">
      <button class="big btn-blue" id="sayBtn" type="button">Say the word üîä</button>
    </div>
  </div>

  <div class="card">
    <h2>‚úçÔ∏è Write</h2>
    <canvas id="draw" width="330" height="220"></canvas><br><br>
    <button class="big btn-pink" id="clearBtn" type="button">Clear ‚ú®</button>
  </div>
</section>

<script>
const LEVELS = [
  { unlockStars: 0,  lessons: [
    { word:"DOG",  say:"dog",  img:"https://placehold.co/230x230?text=DOG"  },
    { word:"CAT",  say:"cat",  img:"https://placehold.co/230x230?text=CAT"  },
    { word:"BALL", say:"ball", img:"https://placehold.co/230x230?text=BALL" },
    { word:"BOOK", say:"book", img:"https://placehold.co/230x230?text=BOOK" }
  ]},
  { unlockStars: 10, lessons: [
    { word:"FISH", say:"fish", img:"https://placehold.co/230x230?text=FISH" },
    { word:"BIRD", say:"bird", img:"https://placehold.co/230x230?text=BIRD" },
    { word:"MILK", say:"milk", img:"https://placehold.co/230x230?text=MILK" },
    { word:"CAKE", say:"cake", img:"https://placehold.co/230x230?text=CAKE" }
  ]},
  { unlockStars: 25, lessons: [
    { word:"CHAIR", say:"chair", img:"https://placehold.co/230x230?text=CHAIR" },
    { word:"TABLE", say:"table", img:"https://placehold.co/230x230?text=TABLE" },
    { word:"HOUSE", say:"house", img:"https://placehold.co/230x230?text=HOUSE" },
    { word:"APPLE", say:"apple", img:"https://placehold.co/230x230?text=APPLE" }
  ]}
];

// UI refs
const pic = document.getElementById("pic");
const wordEl = document.getElementById("word");
const toast = document.getElementById("toast");
const fx = document.getElementById("fx");
const levelNumEl = document.getElementById("levelNum");
const lvlInfoEl = document.getElementById("lvlInfo");
const lock = document.getElementById("lock");
const needStarsEl = document.getElementById("needStars");

// Toast
function showToast(text){
  toast.textContent = text;
  toast.classList.add("show");
  clearTimeout(showToast._t);
  showToast._t = setTimeout(()=>toast.classList.remove("show"), 900);
}
function wigglePic(){ pic.classList.remove("wiggle"); void pic.offsetWidth; pic.classList.add("wiggle"); }
function glowWord(){ wordEl.classList.remove("wordGlow"); void wordEl.offsetWidth; wordEl.classList.add("wordGlow"); }

function starPop(x,y,count=1){
  const n = Math.min(3, Math.max(1,count));
  for(let k=0;k<n;k++){
    const s = document.createElement("div");
    s.className = "fx-star";
    s.textContent = "‚≠ê";
    s.style.left = (x + (Math.random()*28-14)) + "px";
    s.style.top  = (y + (Math.random()*18-9)) + "px";
    fx.appendChild(s);
    setTimeout(()=>s.remove(), 950);
  }
}
function centerOf(el){
  const r = el.getBoundingClientRect();
  return {x:r.left + r.width/2, y:r.top + r.height/2};
}

// Saved state
const STAR_KEY = "ek_stars_v2";
const LEVEL_KEY = "ek_level_v1";

let stars = Number(localStorage.getItem(STAR_KEY) || "0");
let level = Math.max(0, Math.min(LEVELS.length-1, Number(localStorage.getItem(LEVEL_KEY) || "0")));
let idx = 0;

// Stars UI
const starsEl = document.getElementById("stars");
function paintStars(){ starsEl.textContent = String(stars); }
paintStars();

function addStars(n, anchorEl){
  stars += n;
  localStorage.setItem(STAR_KEY, String(stars));
  paintStars();
  const c = anchorEl ? centerOf(anchorEl) : {x:window.innerWidth/2, y:80};
  starPop(c.x,c.y,n);
  showToast("‚≠ê +" + n);
}

document.getElementById("resetStars").addEventListener("click", ()=>{
  stars = 0;
  localStorage.setItem(STAR_KEY, "0");
  paintStars();
  showToast("Stars reset!");
});

document.getElementById("closeLock").addEventListener("click", ()=> lock.style.display="none");

function canUseLevel(lv){
  return stars >= LEVELS[lv].unlockStars;
}
function updateLevelPill(){
  levelNumEl.textContent = String(level+1);
  const total = LEVELS[level].lessons.length;
  lvlInfoEl.textContent = `${idx+1}/${total}`;
}

function render(){
  const L = LEVELS[level].lessons[idx];
  wordEl.textContent = L.word;
  pic.src = L.img;
  pic.alt = L.word;
  updateLevelPill();
}

function randomWord(){
  idx = Math.floor(Math.random() * LEVELS[level].lessons.length);
  render();
  wigglePic();
}

function nextLevel(){
  const next = level + 1;
  if(next >= LEVELS.length){
    showToast("Max level!");
    return;
  }
  if(!canUseLevel(next)){
    needStarsEl.textContent = String(LEVELS[next].unlockStars);
    lock.style.display = "block";
    return;
  }
  level = next;
  idx = 0;
  localStorage.setItem(LEVEL_KEY, String(level));
  render();
  showToast("Level up! üß©");
}

const randomBtn = document.getElementById("randomBtn");
const sayBtn = document.getElementById("sayBtn");
const clearBtn = document.getElementById("clearBtn");

randomBtn.addEventListener("click", ()=>{
  randomWord();
  addStars(1, randomBtn);
  showToast("New word!");
});

document.getElementById("nextLevelBtn").addEventListener("click", nextLevel);

sayBtn.addEventListener("click", ()=>{
  const u = new SpeechSynthesisUtterance(LEVELS[level].lessons[idx].say);
  u.rate = 0.82;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
  glowWord();
  addStars(1, sayBtn);
  showToast("Great saying!");
});

// Drawing
const canvas = document.getElementById("draw");
const ctx = canvas.getContext("2d");
ctx.lineWidth = 7;
ctx.lineCap = "round";
ctx.lineJoin = "round";

let drawing = false;

canvas.addEventListener("pointerdown", e=>{
  drawing = true;
  ctx.beginPath();
  ctx.moveTo(e.offsetX, e.offsetY);
});
canvas.addEventListener("pointermove", e=>{
  if(!drawing) return;
  ctx.lineTo(e.offsetX, e.offsetY);
  ctx.stroke();
});
canvas.addEventListener("pointerup", ()=>drawing=false);
canvas.addEventListener("pointerleave", ()=>drawing=false);

clearBtn.addEventListener("click", ()=>{
  ctx.clearRect(0,0,canvas.width,canvas.height);
  addStars(1, clearBtn);
  showToast("Clean slate!");
});

render();
</script>
</body>
</html>

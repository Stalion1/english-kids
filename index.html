<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>English Kids</title>

<style>
  body{
    margin:0;
    font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
    background:#f7f9fc;
    color:#222;
    display:flex;
    justify-content:center;
  }
  .app{
    width:100%;
    max-width:420px;
    padding:16px 20px 28px;
  }

  /* --- TOP HUD (Stars / Level / Step + progress) --- */
  .hud{
    position:sticky;
    top:0;
    z-index:50;
    background:rgba(247,249,252,0.92);
    backdrop-filter:blur(8px);
    -webkit-backdrop-filter:blur(8px);
    padding:10px 10px 14px;
    margin:0 0 12px;
    border-bottom:1px solid rgba(0,0,0,0.08);
    border-radius:14px;
  }
  .hud-row{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
  }
  .badge{
    background:#fff;
    border-radius:999px;
    padding:8px 12px;
    box-shadow:0 4px 12px rgba(0,0,0,0.08);
    font-weight:800;
    font-size:14px;
    white-space:nowrap;
  }
  .progress{
    margin-top:10px;
    height:10px;
    background:rgba(0,0,0,0.08);
    border-radius:999px;
    overflow:hidden;
  }
  .progress > div{
    height:100%;
    width:0%;
    background:#4a6cff;
    border-radius:999px;
    transition:width 250ms ease;
  }

  h2{ margin:14px 0 6px; font-size:20px; }

  .card{
    background:#fff;
    border-radius:16px;
    padding:16px;
    margin-bottom:20px;
    box-shadow:0 6px 18px rgba(0,0,0,0.08);
  }

  .image-box{
    height:180px;
    border-radius:12px;
    background:#e9eef6;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:64px;
  }

  .choices{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
    margin-top:10px;
  }
  .choice{
    padding:14px;
    border-radius:12px;
    background:#eef2f8;
    text-align:center;
    font-size:20px;
    font-weight:800;
    border:2px solid transparent;
    cursor:pointer;
    user-select:none;
    -webkit-tap-highlight-color:transparent;
  }
  .choice:active{ transform:scale(0.98); }
  .choice.correct{ border-color:rgba(0,160,80,0.55); background:rgba(0,160,80,0.12); }
  .choice.wrong{ border-color:rgba(220,50,50,0.55); background:rgba(220,50,50,0.10); }

  .say-word{
    font-size:28px;
    font-weight:900;
    text-align:center;
    margin:10px 0 12px;
    letter-spacing:0.5px;
  }

  .btn{
    padding:12px 14px;
    width:100%;
    border-radius:12px;
    border:none;
    font-size:16px;
    font-weight:800;
    background:#4a6cff;
    color:#fff;
    cursor:pointer;
  }
  .btn:active{ transform:scale(0.99); }
  .btn.secondary{ background:#eef2f8; color:#222; }

  .trace-box{
    position:relative;
    height:140px;
    border-radius:14px;
    background:#fafbfe;
    border:2px solid #dde3ee;
    margin-top:10px;
    overflow:hidden;
  }

  /* --- TRACE GUIDE: EXTRA LIGHT + THIN --- */
  .trace-word{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:64px;
    font-weight:900;
    letter-spacing:1px;
    color:rgba(0,0,0,0.03);      /* super faint fill */
    opacity:0.35;               /* extra fade */
    pointer-events:none;
    user-select:none;
    -webkit-text-stroke:1px rgba(0,0,0,0.05); /* thin outline */
    text-shadow:none;
  }

  canvas{
    position:absolute;
    inset:0;
    touch-action:none;
  }

  .row{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
    margin-top:10px;
  }
</style>
</head>

<body>
<div class="app">

  <!-- HUD -->
  <div class="hud">
    <div class="hud-row">
      <div class="badge" id="starsBadge">‚≠ê Stars: 0</div>
      <div class="badge" id="levelBadge">Level 1</div>
      <div class="badge" id="stepBadge">1 / 1</div>
    </div>
    <div class="progress"><div id="progressFill"></div></div>
  </div>

  <!-- LOOK -->
  <div class="card">
    <h2>Look</h2>
    <div class="image-box" id="emoji">üê∂</div>
  </div>

  <!-- GUESS -->
  <div class="card">
    <h2>Guess</h2>
    <div class="choices" id="choices"></div>
  </div>

  <!-- SAY -->
  <div class="card">
    <h2>Say</h2>
    <div class="say-word" id="word">DOG</div>
    <button class="btn" id="sayBtn">Say it üîä</button>
  </div>

  <!-- WRITE -->
  <div class="card">
    <h2>Write</h2>
    <div class="trace-box">
      <div class="trace-word" id="traceWord">DOG</div>
      <canvas id="canvas"></canvas>
    </div>
    <div class="row">
      <button class="btn secondary" id="clearBtn">Clear</button>
      <button class="btn" id="nextBtn">Next ‚ñ∂</button>
    </div>
  </div>

</div>

<script>
  // Lesson data (expand anytime)
  const lesson = [
    { word: "DOG",  emoji: "üê∂", options: ["DOG","CAT","BIRD","FISH"] },
    { word: "CAT",  emoji: "üê±", options: ["DOG","CAT","BIRD","FISH"] },
    { word: "BIRD", emoji: "üê¶", options: ["DOG","CAT","BIRD","FISH"] },
    { word: "FISH", emoji: "üêü", options: ["DOG","CAT","BIRD","FISH"] }
  ];

  let idx = 0;
  let stars = 0;
  let level = 1;

  function updateHud() {
    document.getElementById("starsBadge").textContent = `‚≠ê Stars: ${stars}`;
    document.getElementById("levelBadge").textContent = `Level ${level}`;
    document.getElementById("stepBadge").textContent = `${idx + 1} / ${lesson.length}`;
    const pct = lesson.length ? ((idx + 1) / lesson.length) * 100 : 0;
    document.getElementById("progressFill").style.width = `${pct}%`;
  }

  function clearChoiceStyles() {
    document.querySelectorAll(".choice").forEach(el => {
      el.classList.remove("correct","wrong");
    });
  }

  function speak(text) {
    if (!("speechSynthesis" in window)) return;
    window.speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = "en-US";
    u.rate = 0.95;
    window.speechSynthesis.speak(u);
  }

  function checkChoice(button, correct) {
    clearChoiceStyles();
    button.classList.add(correct ? "correct" : "wrong");
    if (correct) {
      stars += 1;
      if (stars % 10 === 0) level += 1;   // every 10 stars -> next level
      updateHud();
      speak(document.getElementById("word").textContent);
    }
  }

  function render() {
    const item = lesson[idx];
    document.getElementById("emoji").textContent = item.emoji;
    document.getElementById("word").textContent = item.word;
    document.getElementById("traceWord").textContent = item.word;

    const choicesEl = document.getElementById("choices");
    choicesEl.innerHTML = "";
    item.options.forEach(opt => {
      const b = document.createElement("button");
      b.className = "choice";
      b.type = "button";
      b.textContent = opt;
      b.addEventListener("click", () => checkChoice(b, opt === item.word));
      choicesEl.appendChild(b);
    });

    clearChoiceStyles();
    clearCanvas();
    updateHud();
  }

  // Buttons
  document.getElementById("sayBtn").addEventListener("click", () => {
    speak(document.getElementById("word").textContent);
  });

  document.getElementById("nextBtn").addEventListener("click", () => {
    idx = (idx + 1) % lesson.length;
    render();
  });

  // Canvas drawing (iPhone-friendly)
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");
  let drawing = false;

  function resize() {
    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    ctx.lineWidth = 7;
    ctx.strokeStyle = "#222";
  }

  window.addEventListener("resize", resize);
  resize();

  function start(e) {
    drawing = true;
    ctx.beginPath();
    draw(e);
  }
  function end() {
    drawing = false;
    ctx.beginPath();
  }
  function draw(e) {
    if (!drawing) return;
    const rect = canvas.getBoundingClientRect();
    const pt = e.touches ? e.touches[0] : e;
    const x = pt.clientX - rect.left;
    const y = pt.clientY - rect.top;
    ctx.lineTo(x, y);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(x, y);
  }

  canvas.addEventListener("mousedown", start);
  canvas.addEventListener("mouseup", end);
  canvas.addEventListener("mousemove", draw);

  canvas.addEventListener("touchstart", (e) => { e.preventDefault(); start(e); }, { passive:false });
  canvas.addEventListener("touchmove",  (e) => { e.preventDefault(); draw(e);  }, { passive:false });
  canvas.addEventListener("touchend",   (e) => { e.preventDefault(); end(e);   }, { passive:false });

  function clearCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }
  document.getElementById("clearBtn").addEventListener("click", clearCanvas);

  // Start
  render();
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Kids</title>

<style>
body{
  margin:0;
  font-family: system-ui, Arial, sans-serif;
  background: linear-gradient(135deg,#ffe7d2,#f7b9ff,#bfe8ff);
  text-align:center;
}
header{
  background:#4a6cf7;
  color:white;
  padding:14px;
  font-size:22px;
  font-weight:900;
}
.card{
  background:white;
  margin:18px;
  padding:18px;
  border-radius:16px;
  box-shadow:0 10px 24px rgba(0,0,0,.15);
}
img{
  width:220px;
  height:220px;
}
.word{
  font-size:32px;
  font-weight:900;
  letter-spacing:2px;
}
.row{
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
}
button{
  padding:14px 18px;
  border-radius:14px;
  border:none;
  font-size:18px;
  font-weight:900;
  background:#4a6cf7;
  color:white;
}
button:active{transform:scale(.97)}
canvas{
  border:3px dashed #4a6cf7;
  border-radius:14px;
  touch-action:none;
}
.locked{opacity:.5;pointer-events:none}
</style>
</head>

<body>

<header>ğŸŒˆ English Kids â­ <span id="stars">0</span></header>

<div class="card">
  <h2>ğŸ‘€ Look</h2>
  <img id="pic">
</div>

<div class="card">
  <h2>ğŸ¤” Choose the word</h2>
  <div id="masked" class="word">_ _ _</div>
  <div class="row" id="choices"></div>
</div>

<div class="card locked" id="sayCard">
  <h2>ğŸ—£ï¸ Say</h2>
  <button onclick="sayWord()">Say the word</button>
</div>

<div class="card locked" id="writeCard">
  <h2>âœï¸ Trace</h2>
  <canvas id="draw" width="300" height="180"></canvas><br><br>
  <button onclick="checkTrace()">Check Trace</button>
</div>

<script>
function emojiImg(e){
  return "data:image/svg+xml;charset=UTF-8," +
  encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'>
  <rect width='200' height='200' rx='30' fill='white'/>
  <text x='50%' y='60%' text-anchor='middle' font-size='120'>${e}</text>
  </svg>`);
}

const words=[
 {w:"CAT",e:"ğŸ˜º"},
 {w:"DOG",e:"ğŸ¶"},
 {w:"COW",e:"ğŸ®"},
 {w:"PIG",e:"ğŸ·"},
 {w:"BALL",e:"âš½"},
 {w:"BOOK",e:"ğŸ“–"},
 {w:"CAKE",e:"ğŸ°"},
 {w:"CAR",e:"ğŸš—"}
];

let stars=0, current;
const pic=document.getElementById("pic");
const masked=document.getElementById("masked");
const choices=document.getElementById("choices");
const sayCard=document.getElementById("sayCard");
const writeCard=document.getElementById("writeCard");

function newWord(){
  sayCard.classList.add("locked");
  writeCard.classList.add("locked");
  current=words[Math.floor(Math.random()*words.length)];
  pic.src=emojiImg(current.e);
  masked.textContent=current.w.split("").map(()=>"_").join(" ");
  choices.innerHTML="";
  shuffle(words).slice(0,4).forEach(o=>{
    const b=document.createElement("button");
    b.textContent=o.w;
    b.onclick=()=>choose(o.w);
    choices.appendChild(b);
  });
  drawGuide();
}

function choose(w){
  if(w===current.w){
    masked.textContent=current.w;
    stars+=2;
    document.getElementById("stars").textContent=stars;
    sayCard.classList.remove("locked");
    writeCard.classList.remove("locked");
  }
}

function sayWord(){
  speechSynthesis.speak(new SpeechSynthesisUtterance(current.w.toLowerCase()));
}

const canvas=document.getElementById("draw");
const ctx=canvas.getContext("2d");
ctx.lineWidth=6;ctx.lineCap="round";
let drawing=false;

canvas.onpointerdown=e=>{drawing=true;ctx.beginPath();ctx.moveTo(e.offsetX,e.offsetY);}
canvas.onpointermove=e=>{if(drawing){ctx.lineTo(e.offsetX,e.offsetY);ctx.stroke();}}
canvas.onpointerup=()=>drawing=false;

function drawGuide(){
  ctx.clearRect(0,0,300,180);
  ctx.setLineDash([6,6]);
  ctx.font="bold 64px Arial";
  ctx.strokeText(current.w,40,120);
  ctx.setLineDash([]);
}

function checkTrace(){
  stars+=1;
  document.getElementById("stars").textContent=stars;
  newWord();
}

function shuffle(a){return [...a].sort(()=>Math.random()-.5)}

newWord();
</script>

</body>
</html>
